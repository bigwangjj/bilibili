var NewADsShowSwitch=(function(){var b=["codo","dnf","x52","cf","bns","nz","speed","x5"];var g=location.protocol;var e=[g+"//codol.qq.com/main.shtml",g+"//dnf.qq.com/main.shtml",g+"//dnf.qq.com/maintest.shtml",g+"//cf.qq.com/maintest_idata.shtml",g+"//cf.qq.com/main.shtml",g+"//cf.qq.com/act/a20160520ntcls/index.htm",g+"//codol.qq.com/main_m.shtml",g+"//nz.qq.com/main.shtml",g+"//bns.qq.com/m/",g+"//bns.qq.com/index.shtml",g+"//bns.qq.com/main.shtml",g+"//bns.qq.com/cp/a20160511bnsyx/index.htm",g+"//speed.qq.com/home/client_gg_2015.html",g+"//speed.qq.com/home/client_2012.shtml",g+"//speed.qq.com/home/client_newsbox.htm",g+"//x5.qq.com/main.shtml",g+"//nz.qq.com/m/index.shtml",g+"//5s.qq.com/main.shtml",g+"//5s.qq.com/cp/a20161226gift/index.htm"];var a=function(){var h=location.hostname.replace(".qq.com","");if(h=="sm"){h="smite";}if(h=="5s"){h="x52";}if(h=="eafifa"){h="fifa";}if(h=="codol"){h="codo";}if(h=="mho"){h="mh";}return h;};var f=function(){var j=a();for(var h in b){if(isNaN(h)){continue;}if(b[h]==j){return true;}}return false;};var d=function(){var j=location.href.indexOf("?");if(j!=-1){var h=location.href.slice(0,j);}else{var h=location.href;}for(var j in e){if(isNaN(j)){continue;}if(e[j]==h){return true;}}return false;};var c=function(){return false;};return{isGrayServiceFunc:f,isGrayUrlFunc:d};})();if(NewADsShowSwitch.isGrayServiceFunc()&&NewADsShowSwitch.isGrayUrlFunc()){var start=new Date();var AdsShowEngine=(function(){var l=document,K=1*new Date,I=2000,J="",e=0,O=navigator.userAgent.toLowerCase(),m=O.indexOf("msie")!=-1,f=O.indexOf("opera")!=-1,x="data-tgadieg",Q="data-TGAD";var a="data-tgad";var r=location.protocol;var t=0;var o=0;var E=[];var v=r+"//apps.game.qq.com/eas/comm/eas.php";var M=r+"//apps.game.qq.com/client_pop/recommendReport";var C=r+"//ossweb-img.qq.com/images/clientpop/idata_ad/idata_ad_";var w=r+"//apps.idata.qq.com/outer/ad_recommend_list";var h=r+"//apps.idata.qq.com/outer/admore_recommend";var n=r+"//idata.tencent-cloud.net/outer/ad_log_report";var y=r+"//apps.idata.qq.com/outer/ad_log_report";var H="gAds";var R="RES_OBJ";var d=r+"//ossweb-img.qq.com/images/clientpop/idata_ad/idata_adm_";var B="iDataNew";var N="RES_OBJ_ADM";objPageAdElements={};if(!Object.keys){Object.keys=function(W){if(W!==Object(W)){throw new TypeError("Object.keys called on a non-object");}var U=[],V;for(V in W){if(Object.prototype.hasOwnProperty.call(W,V)){U.push(V);}}return U;};}var F=function(V){var U;for(U in V){return !1;}return !0;};var u=function(V,U){var X={"M+":V.getMonth()+1,"d+":V.getDate(),"h+":V.getHours(),"m+":V.getMinutes(),"s+":V.getSeconds(),"q+":Math.floor((V.getMonth()+3)/3),S:V.getMilliseconds()};if(/(y+)/.test(U)){U=U.replace(RegExp.$1,(V.getFullYear()+"").substr(4-RegExp.$1.length));}for(var W in X){if(new RegExp("("+W+")").test(U)){U=U.replace(RegExp.$1,(RegExp.$1.length==1)?(X[W]):(("00"+X[W]).substr((""+X[W]).length)));}}return U;};var S=function(W,U){if(U.length==0||U==null||U=="undefined"||W==null||W=="undefined"){return false;}else{var V=U.length;while(V--){if(U[V]===W){return true;}}return false;}};var L=function(W,V,X,U){if(W.addEventListener){W.addEventListener(V,X,U);}else{if(W.attachEvent){W.attachEvent("on"+V,X);}}};var c=function(){return q("pt2gguin")?q("pt2gguin").substr(1).replace(/\b(0+)/gi,""):0;};var q=function(V){var U,W=new RegExp("(^| )"+V+"=([^;]*)(;|$)");if(U=l.cookie.match(W)){return unescape(U[2]);}else{return"";}};var i=function(){var U=location.hostname.replace(".qq.com","");if(U=="sm"){U="smite";}if(U=="5s"){U="x52";}if(U=="eafifa"){U="fifa";}if(U=="codol"){U="codo";}return U;};function z(V){var U=l.getElementsByTagName("script"),W=U.length,Y=null;while(W--){Y=U[W];if(Y.src==V){var X=Y.parentNode;if(X&&X.nodeType===1){X.removeChild(Y);}}}}var k=function(ac,ab,aa){var Z=l.createElement("script"),Y=l.getElementsByTagName("head")[0],U=bFn2=true,X=l.getElementsByTagName("script"),V=X.length,W=false;if(ab==null||typeof(ab)=="undefined"){U=false;}if(aa==null||typeof(aa)=="undefined"){bFn2=false;}Z.src=ac;Z.setAttribute("charset","UTF-8");Z.onloadDone=false;if(m){L(Z,"readystatechange",function(ad){if(("loaded"===Z.readyState||"complete"===Z.readyState)&&!Z.onloadDone){Z.onloadDone=true;if(U){ab();}Z.onreadystatechange=null;}});if(Z.readyState==="loaded"&&Z.nextSibling==null){if(bFn2){aa();}}}else{Z.onload=function(){Z.onloadDone=true;if(U){ab();}Z.onload=null;};Z.onerror=function(){if(bFn2){aa();}Z.onerror=null;};}while(V--){if(X[V].src===ac){ab();W=true;break;}}if(!W){l.documentElement.firstChild.insertBefore(Z,null);}};var p=function(W,U,X){var V=l.createElement("script");V.type="text/javascript";if(X){V.setAttribute("charset",X);}if(V.readyState){V.onreadystatechange=function(){if(V.readyState=="loaded"||V.readyState=="complete"){V.onreadystatechange=null;if(U!=null||typeof(U)!="undefined"){U();}l.getElementsByTagName("head")[0].removeChild(this);}};}else{V.onload=function(){if(U!=null||typeof(U)!="undefined"){U();}l.getElementsByTagName("head")[0].removeChild(this);};}V.src=W;l.getElementsByTagName("head")[0].appendChild(V);};var T=function(U){try{var V="";V=(new Function("return "+U))();return V;}catch(W){return false;}};var G=function(){var Z=l.getElementsByTagName("*"),X=Z.length,U,W,V=[],Y={};while(X--){U=Z[X];W=U.getAttribute&&U.getAttribute(x)||U.getAttribute(Q)||U.getAttribute(a);if(typeof W=="string"&&W.length>0&&W.split(",").length>=2){V=W.split(",");if(V.length>=2&&!isNaN(V[0])&&!isNaN(V[1])){Y={};Y.element=U;Y.adType="2";Y.isRendered="0";Y.adMaterial=null;Y.isDynamicPos=(V.length==3&&V[2]==1)?true:false;if(objPageAdElements[V[0]]==undefined){objPageAdElements[V[0]]={};objPageAdElements[V[0]][V[1]]=Y;}else{objPageAdElements[V[0]][V[1]]=Y;}}}}};var j=function(X,ac,V){if(X==null||X=="undefined"||ac==null||ac=="undefined"){return;}var Y=Object.keys(objPageAdElements[X]);if(Y.length<=0){return;}var ab=ac;var U=[];var W=[];var Z=[];for(var aa in Y){if(isNaN(aa)){continue;}if(ab.force[Y[aa]]!=undefined&&ab.force[Y[aa]]!=null){U.push(Y[aa]);objPageAdElements[X][Y[aa]]["adType"]="0";objPageAdElements[X][Y[aa]]["adMaterial"]=ab.force[Y[aa]];}else{W.push(Y[aa]);}}D(ab,W,Z,X,V,function(){console.log("multi channel empty");});};var D=function(ab,X,aa,Z,Y,V){if(Y!=0&&X.length>0){var W=d+Z+".js?v="+K;var U=function(){setTimeout(function(){z(W);},250);var ac=T(B+Z);if(ac){var ae=X.join(",");var ad=h+"?channel_id="+Z+"&uin="+Y+"&appid="+J+"&pos_id="+ae+"&channel=adrecommend&_="+K;var af=function(){setTimeout(function(){z(ad);},250);var ak=T(N+Z);var ai;var al;var ag=[];if(ak!==false&&ak.errcode==0){var ah=X.length;for(var aj=0;aj<ah;aj++){if(ak.data[X[aj]]==undefined){ag.push(X[aj]);X.splice(aj,1);aj--;ah--;}else{objPageAdElements[Z][X[aj]]["adType"]="10";al=ak.data[X[aj]]["material_id"];ai=ac[al];if(ai==undefined){ag.push(X[aj]);X.splice(aj,1);aj--;ah--;}else{ai.recommendId=ak.data[X[aj]]["recommend_id"];ai.algo=ak.data[X[aj]]["algo_type"];ai.taskId=ak.data[X[aj]]["task_id"];ai.taskPid=ak.data[X[aj]]["task_pid"];ai.setId=ak.data[X[aj]]["set_id"];ai.materialId=ak.data[X[aj]]["material_id"];ai.materialPid=ak.data[X[aj]]["material_pid"];ai.schemeType=ak.data[X[aj]]["task_type"];ai.pid=ak.data[X[aj]]["pid"];objPageAdElements[Z][X[aj]]["adMaterial"]=ai;}}}s(ab,ag,aa,Z,Y,V);}else{s(ab,X,aa,Z,Y,V);}};setTimeout(function(){k(ad,af,function(){s(ab,X,aa,Z,Y,V);});},0);}else{s(ab,X,aa,Z,Y,V);}};setTimeout(function(){k(W,U,function(){s(ab,X,aa,Z,Y,V);});},0);}else{s(ab,X,aa,Z,Y,V);}};var s=function(ac,X,ab,Y,W,Z){if(W!=0&&!F(ac.precise)&&X.length>0&&ac.precise!=null&&ac.precise!=undefined){var V=X.join(",");var U=w+"?channel_id="+Y+"&uin="+W+"&appid="+J+"&pos_id="+V+"&_="+K;var ad=function(){setTimeout(function(){z(U);},250);preciseData=T(R+Y);var af;var ah;if(preciseData!==false&&preciseData.errcode==0){var ae=X.length;for(var ai=0;ai<ae;ai++){if(preciseData.data[X[ai]]==undefined){ab.push(X[ai]);X.splice(ai,1);ai--;ae--;}else{objPageAdElements[Y][X[ai]]["adType"]="11";ah=preciseData.data[X[ai]]["items"];af=ac.precise[ah];if(af==undefined){ab.push(X[ai]);X.splice(ai,1);ai--;ae--;}else{af.recommendId=preciseData.data[X[ai]]["recommend_id"];af.algoType=preciseData.data[X[ai]]["algo_type"];objPageAdElements[Y][X[ai]]["adMaterial"]=af;}}}}else{ab=X;}if(ab.length>0){for(var ag in ab){if(isNaN(ag)){continue;}objPageAdElements[Y][ab[ag]]["adType"]="2";objPageAdElements[Y][ab[ag]]["adMaterial"]=ac.common[ab[ag]];}}g(Y,Object.keys(objPageAdElements[Y]));};setTimeout(function(){k(U,ad,ad);},0);}else{ab=X;if(ab.length>0){for(var aa in ab){if(isNaN(aa)){continue;}objPageAdElements[Y][ab[aa]]["adType"]="2";objPageAdElements[Y][ab[aa]]["adMaterial"]=ac.common[ab[aa]];}}g(Y,Object.keys(objPageAdElements[Y]));}};var g=function(aN,am){if(objPageAdElements[aN]!=undefined){var ap=null;var ak=null;var az=null;var ac=null;var aO=null;var aJ=null;var av=null;var aw=null;var aq=null;var V=null;for(var aP in am){if(isNaN(aP)){continue;}ap=objPageAdElements[aN][am[aP]];if(ap==undefined||ap==null){continue;}ak=ap.element;az=ap.adType;ac=ap.isRendered;aO=ap.adMaterial;isDynamicPos=ap.isDynamicPos;if(aO==undefined){continue;}var ab=u(new Date,"yyyy-MM-dd hh:mm:ss");var au="";var aC="1";var ax="2";var aK="";var ao="";var aG="";var ad="";var X="";var an="";var aj="";var W="";var al="";var aS="";var aa=location.href;var ai="";var aM="";var Z="";var ah="";var aA="";var af="";var U="";var aF="";var aE="";var aL="";var aH="";var ag="";var ae="";var aQ="";var ad="";var aj="";var aD="";var ar="";var ay="";var Y="";var at="";var aI="";if(ak.attributes[x]||ak.attributes[Q]||ak.attributes[a]){if(ac=="1"){return;}if(isDynamicPos&&aO.isBottom==1){var aR=ak.parentNode;aR.parentNode.removeChild(aR);}aJ=aO.adUrl||"";av=aO.imgUrl||"";aw=aO.Fname||aO.adMemo||"";aq=aO.popWidth||"";V=aO.popHeight||"";imgBeginTime=aO.beginTime||"";imgEndTime=aO.endTime||"";au="5";aK=aO.actionID||"";ao=aO.adId||"";aG=am[aP]||"";ad=aO.recommendId||"0";al=aO.ecode||"";aF=aO.pid||"";aE=aO.setId||"";aL=aO.materialId||"";aH=aO.materialPid||"";ag=aO.taskId||"";ae=aO.taskPid||"";aQ=aO.schemeType;ad=aO.recommendId||"";aj="";aD=location.href;ay=aO.algo||"";ar=aO.adType||"";Y=aO.beginTime||"";at=aO.endTime||"";ah=aN+"."+aG+"."+ao+"."+al;ak.id=ao;ak.onclick=b(aQ,aN,al,aG,ad,ay,ar,ae,aE,aH,aj,aD,Y,at,aF,ag,aL,aJ,K);if(aJ!="#"&&aJ!=""){ak.target="_blank";ak.href=aJ;}else{ak.href="javascript:;";}ak.innerHTML="<img src='"+av+"?_r="+K+"' alt="+aw+" title= "+aw+" data-detail='"+aw+"' data-starttime='"+imgBeginTime+"' data-endtime='"+imgEndTime+"' width="+aq+" height="+V+" />";objPageAdElements[aN][am[aP]]["isRendered"]="1";if(az=="0"||az=="10"||az=="11"){var aB=M+"?bid="+J+"&act_type=5&algo=4&uin="+e+"&recommend_id=0&t="+K+"&loc="+aG+"&id="+ao+"&act_id="+aK+"&table_type=1&e_code="+al;if(az=="10"){aI=aQ+"|"+aN+"|"+al+"|"+aG+"|"+ad+"|"+ay+"|"+ar+"|"+ae+"|"+aE+"|"+aH+"|"+aj+"|"+aD+"|"+Y+"|"+at;var aB=y+"?uin="+e+"&pid="+aF+"&appid="+J+"&channel=adrecommend&task_id="+ag+"&material_id="+aL+"&world_id=&table_type=1&msg="+aI+"&t="+K;}}else{var aB=v+"?m=SendLog&show_ads="+ah+"&ad_url="+encodeURIComponent(aJ)+"&click_type=1&t="+(new Date()).getTime();}p(aB,function(){});}}t++;z(C+aN+".js?v="+K);A(E,t,o);}};var b=function(ac,W,Z,al,ae,ai,ad,U,aj,ab,aa,am,ah,X,Y,V,ag,af,ak){return function(){var ax=this.id;var ar="";var au="";var ay=this.getAttribute&&this.getAttribute(x)||this.getAttribute(Q);if(typeof ay=="string"&&ay.length>0&&ay.split(",").length==2){var av=ay.split(",");if(av.length==2&&!isNaN(av[0])&&!isNaN(av[1])){ar=av[0];au=av[1];}}var az=1*new Date;var at=objPageAdElements[ar][au];if(at){var ao=at.adType||"";var aq=at.adMaterial.actionID||"";var aw=at.adMaterial.ecode||"";}var aA=ar+"."+au+"."+ax+"."+aw;var an="";var ap="";if(ao=="0"||ao=="10"||ao=="11"){an=M+"?bid="+J+"&act_type=5&algo=4&uin="+e+"&recommend_id=0&t="+az+"&loc="+au+"&id="+ax+"&act_id="+aq+"&table_type=2&e_code="+aw;if(ao=="10"){ap=ac+"|"+ar+"|"+aw+"|"+au+"|"+ae+"|"+ai+"|"+ad+"|"+U+"|"+aj+"|"+ab+"|"+aa+"|"+am+"|"+ah+"|"+X;an=y+"?uin="+e+"&pid="+Y+"&appid="+J+"&channel=adrecommend&task_id="+V+"&material_id="+ag+"&world_id=&table_type=2&msg="+ap+"&t="+ak;}}else{an=v+"?m=SendLog&show_ads="+aA+"&ad_url="+encodeURIComponent(af)+"&click_type=2&t="+(new Date()).getTime();}p(an,function(){});};};var P=function(){if(window.gpmAdProcess!=undefined){window.gpmAdProcess();}};var A=function(U,W,V){if(W<0||W>V){if(W==V+1){P();}return;}var Y=U[W];urlTmp=C+Y+".js?v="+K;var X=function(){jTmpData=T(H+Y);if(jTmpData!==false){j(Y,jTmpData,e);}};setTimeout(function(){k(urlTmp,X,function(){console.log("xxxx");});},0);};return{run:function(){J=i();e=c();G();var U=Object.keys(objPageAdElements);if(U.length<=0){return;}o=U.length-1;E=U;A(E,t,o);}};})();AdsShowEngine.run();}else{var TGAdsShow=(function(){var protocol=location.protocol;var l=document,_r=1*new Date,_s=2000,t=null,nu=navigator.userAgent.toLowerCase(),ie=nu.indexOf("msie")!=-1,opera=nu.indexOf("opera")!=-1,strAttribute="data-TGAD",strAttributeTitle="title-TGAD",strAttributeSubTitle="data-subtitle",recLoad=false,grey=false,game,gpmObjJson,iUin,arrLength,gpmArrLength,arrLinks=[],gpmArrLinks=[],gpmUsedArr=[],gpmTmpArr=[],arrLoadLinks=[],showForceArr=[],ShowAdList=[],arrAdId=[],preview=document.getElementById("preview"),adJsPre=protocol+"//game.qq.com/time/qqadv/Info_new_",adSpecialJsPre=protocol+"//ossweb-img.qq.com/images/clientpop/ads/Info_new_",adImgPre=protocol+"//ossweb-img.qq.com/upload/adw/",sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php",gpmRecUrl=protocol+"//apps.game.qq.com/client_pop/daoju/api.php",gpmAdJsPre=protocol+"//ossweb-img.qq.com/images/clientpop/adrecommend/adrecommend_",LogCgi=protocol+"//apps.game.qq.com/eas/comm/eas.php",gpmSendClickUrl=protocol+"//apps.game.qq.com/client_pop/recommendReport";var sb=[3513,3514,3515,3516,3517,5082,5083,5084,11514,11515,755,756,757,758,759,3199,7151,10456,10457,14016];if(preview!=null){var s=document.getElementById("preview").src;var env=getParameter(s,"env");if(env=="DevelopEcho"){adJsPre=protocol+"//echoweb.qq.com/data/ad/js/qqadv/Info_new_";adImgPre=protocol+"//echoweb.qq.com/data/ad/img/";sendClickUrl=protocol+"//echoweb.qq.com/apps/adw_sendclick/api/send_click.php";}else{if(env=="Develop"){adJsPre=protocol+"//game.qq.com/time/qqadv_develop/Info_new_";adImgPre=protocol+"//ossweb-img.qq.com/upload/adw_develop/";sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php";}else{if(env=="Beta"){adJsPre=protocol+"//game.qq.com/time/qqadv_beta/Info_new_";adImgPre=protocol+"//ossweb-img.qq.com/upload/adw_beta/";sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php";}else{adJsPre=protocol+"//game.qq.com/time/qqadv/Info_new_";adImgPre=protocol+"//ossweb-img.qq.com/upload/adw/";sendClickUrl=protocol+"//apps.game.qq.com/adw_sendclick/api/send_click.php";}}}}function attach(d,a,c,b){if(d.addEventListener){d.addEventListener(a,c,b);}else{if(d.attachEvent){d.attachEvent("on"+a,c);}}}function getUin(){return gCookie("pt2gguin")?gCookie("pt2gguin").substr(1).replace(/\b(0+)/gi,""):0;}function gCookie(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=l.cookie.match(reg)){return unescape(arr[2]);}else{return"";}}function getGame(){var g=location.hostname.replace(".qq.com","");if(g=="sm"){g="smite";}if(g=="5s"){g="x52";}if(g=="eafifa"){g="fifa";}return g;}function loadJson(a,b,c){var d=l.createElement("script"),e=l.getElementsByTagName("head")[0],bFn1=bFn2=true,f=l.getElementsByTagName("script"),j=f.length,h=false;if(b==null||typeof(b)=="undefined"){bFn1=false;}if(c==null||typeof(c)=="undefined"){bFn2=false;}d.src=a;d.onloadDone=false;if(ie){attach(d,"readystatechange",function(e){if(("loaded"===d.readyState||"complete"===d.readyState)&&!d.onloadDone){d.onloadDone=true;if(bFn1){b();}d.onreadystatechange=null;}});if(d.readyState==="loaded"&&d.nextSibling==null){if(bFn2){c();}}}else{d.onload=function(){d.onloadDone=true;if(bFn1){b();}d.onload=null;};d.onerror=function(){if(bFn2){c();}d.onerror=null;};}while(j--){if(f[j].src===a){b();h=true;break;}}if(!h){l.documentElement.firstChild.insertBefore(d,null);}}function loadRecData(_0){var u=iUin,g=game,posArr=[];for(var i in showForceArr){if(gpmObjJson.banner){delete gpmObjJson.banner[showForceArr[i]];}}for(var k in arrLinks){if(!arrLinks[k].a){continue;}var tmp=arrLinks[k].a.split(",");arrAdId.push(tmp[1]);}for(var k in gpmObjJson.banner){if(inarr(arrAdId,k)){posArr.push(k);}}var posStr=posArr.join(",");if(posStr){var b=gpmRecUrl+"?sence=1&start=1&end=10&uin="+u+"&pdName="+g+"&pos_id="+posStr+"&t="+_r,s=function(){setTimeout(function(){removeScript(b);},250);showGpmADs(_0);};setTimeout(function(){loadJson(b,s,s);},0);}else{loadADs(0);return;}}function inarr(a,e){var s=String.fromCharCode(2);var r=new RegExp(s+e+s);return(r.test(s+a.join(s)+s));}function loadGpmADs(){var a=0,d=gpmArrLinks[a],ad=d.a.split(","),_0=ad[0],_1=ad[1];if(!(isNaN(_0)||isNaN(_1))){var b=gpmAdJsPre+_0+".js?v="+_r,s=function(){setTimeout(function(){removeScript(b);},250);showForceADs(_0);},f=function(){loadADs(0);};setTimeout(function(){loadJson(b,s,f);},0);}else{loadADs(0);}}function loadADs(c){var a=c;if(a<arrLength){var d=arrLinks[a],o=d.o,ad=d.a.split(","),_0=ad[0],_1=ad[1],_load=false;if(!(isNaN(_0)||isNaN(_1))){if(inarr(sb,_1)){var b=adSpecialJsPre+_0+".js?v="+_r;}else{var b=adJsPre+_0+".js?v="+_r;}var s=function(){arrLoadLinks[_0]=1;_load=true;setTimeout(function(){removeScript(b);},250);show(o,_0,_1,a);};if(1==arrLoadLinks[_0]){show(o,_0,_1,a);}else{setTimeout(function(){loadJson(b,function(){if(!_load){s();}},function(){if(!_load){s();}});},0);}if(opera){setTimeout(function(){if(!_load){s();}},250);}}}}function showForceADs(a){try{gpmObjJson=(new Function("return gDaTaNew"+a))();}catch(e){loadADs(0);return;}if(gpmObjJson.force){var forceReporUrl=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=4&uin="+iUin+"&recommend_id=0&t="+_r;for(var k in gpmArrLinks){if(!gpmArrLinks[k].a){continue;}var d=gpmArrLinks[k].o,aTmp=gpmArrLinks[k].a.split(","),posId=aTmp[1];for(var k in gpmObjJson.force){if(k==posId){var l=gpmObjJson.force[k].length,iKeys=[];for(var i=0;i<l;i++){if(!compTime(gpmObjJson.force[k][i].beginTime,gpmObjJson.force[k][i].endTime,1)){gpmObjJson.force[k].splice(i,1);i--;l--;}}l=gpmObjJson.force[k].length;if(l>0){var key=0;if(l>1){key=randNum(0,(l-1));}showForceArr.push(posId);var aInfo=gpmObjJson.force[k][key];var v=a+","+posId;var item=aInfo.iAdId;for(var i=0,n=0;i<arrLinks.length;i++){if(arrLinks[i].a!=v){arrLinks[n++]=arrLinks[i];}}arrLinks.length-=1;if(d.attributes[strAttribute]){d.id=item;var forceType=1;showHtml(d,aInfo,forceType,forceReporUrl);}}}}}}gpmArrLinks=arrLinks;gpmArrLength=arrLength=arrLinks.length;loadRecData(a);}function showHtml(d,aInfo,forceType,reportUrl){if(forceType==1){var posId=getPosId(d);var act_id=getForceActId(d);var e_code=getForceEcodeId(d);}else{var posId=getPosId(d);var act_id=getActId(d.id);var e_code=getEcodeId(d.id);}d.onclick=function(){var jsUrl=reportUrl+"&loc="+posId+"&id="+this.id+"&act_id="+act_id+"&table_type=2&e_code="+e_code;fn.loadjs(jsUrl);};d.target="_blank";d.href=aInfo.adUrl;d.innerHTML="<img src='"+aInfo.imgUrl+"?_r="+_r+"' alt="+aInfo.Fname+" title= "+aInfo.Fname+" data-detail='"+aInfo.ad_memo+"' width="+aInfo.popWidth+" height="+aInfo.popHeight+" />";var jsUrl=reportUrl+"&loc="+posId+"&id="+d.id+"&act_id="+aInfo.actionID+"&table_type=1&e_code="+aInfo.ecode;fn.loadjs(jsUrl);}function showGpmADs(a){try{gpmRecJson=(new Function("return RES_OBJ"))();if(gpmRecJson.errcode==0){recLoad=true;}}catch(e){recLoad=false;}if(recLoad){if(!gpmRecJson.data){loadADs(0);return;}if(!gpmRecJson.data.props){loadADs(0);return;}var recId=gpmRecJson.data.recommend_id;var algoType=gpmRecJson.data.algo_type;var reporUrl=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo="+algoType+"&uin="+iUin+"&recommend_id="+recId+"&t="+_r;for(var i=0;i<gpmArrLinks.length;i++){var d=gpmArrLinks[i].o,aTmp=gpmArrLinks[i].a.split(","),b=aTmp[1];for(var k in gpmRecJson.data.props){var posId=gpmRecJson.data.props[k].pos_id;var item=gpmRecJson.data.props[k].items;if(b==posId){if(gpmObjJson.iAdId){if(gpmObjJson.iAdId[item]){if(compTime(gpmObjJson.iAdId[item].beginTime,gpmObjJson.iAdId[item].endTime)){var aInfo=gpmObjJson.iAdId[item];var v=a+","+posId;gpmTmpArr.push(v);if(d.attributes[strAttribute]){d.id=item;var forceType=0;showHtml(d,aInfo,forceType,reporUrl);}}}}}}}}else{if(!gpmObjJson.banner){loadADs(0);return;}var reporUrl=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=0&uin="+iUin+"&recommend_id=0&t="+_r;if(gpmObjJson.adsize){for(var one in gpmObjJson.adsize){for(var i=0;i<gpmObjJson.adsize[one].length;i++){if(!compTime(gpmObjJson.adsize[one][i].beginTime,gpmObjJson.adsize[one][i].endTime)){gpmObjJson.adsize[one].splice(i,1);}}}}for(var k in gpmArrLinks){var d=gpmArrLinks[k].o,aTmp=gpmArrLinks[k].a.split(","),b=aTmp[1];if(gpmObjJson.banner[b]){var pArr=gpmObjJson.banner[b];var posId=pArr.banner_id;var size=pArr.banner_width+"*"+pArr.banner_height;if(gpmObjJson.adsize){if(gpmObjJson.adsize[size]){var _f=false;var adsArr=gpmObjJson.adsize[size];if(gpmUsedArr[size]){var n=gpmUsedArr[size];if(adsArr[n]){_f=true;var aInfo=adsArr[n];gpmUsedArr[size]=n+1;}}else{if(adsArr[0]){_f=true;var aInfo=adsArr[0];gpmUsedArr[size]=1;}}if(_f){if(compTime(aInfo.beginTime,aInfo.endTime)){var v=a+","+posId;var item=aInfo.iAdId;gpmTmpArr.push(v);if(d.attributes[strAttribute]){d.id=item;var forceType=0;showHtml(d,aInfo,forceType,reporUrl);}}}}}}}}for(var k in gpmTmpArr){var v=gpmTmpArr[k];for(var i=0;i<arrLinks.length;i++){if(arrLinks[i].a==v){arrLinks.splice(i,1);}}}arrLength=arrLinks.length;loadADs(0);}function show(o,a,b,c){var d=o,_c=c,objJson=null,strTitle;try{objJson=(new Function("return oDaTaNew"+a))();}catch(e){if(inarr(sb,b)){objJson=eval("oDaTaNew"+a+'={"pos'+b+'":["Json Error!!","'+adSpecialJsPre+a+'.js","ad-loading.gif","50","50"]}');}else{objJson=eval("oDaTaNew"+a+'={"pos'+b+'":["Json Error!!","'+adJsPre+a+'.js","ad-loading.gif","50","50"]}');}}for(var k in objJson){if(b==k.toString().substring(3)){var f=eval("oDaTaNew"+a+"."+k),strTitle=decodeURI(f[0]),strHref=f[1],strlistdate=f[8],strSubTitle=decodeURI(f[9]),tas_code=fn.getUrlVar(f[1],"tas_code");if(tas_code==null||tas_code==undefined){tas_code=fn.getUrlVar(strHref,"e_code");if(tas_code==null||tas_code==undefined){tas_code=0;}}if(d.attributes[strAttribute]){if(f){var pgv="ad."+a+"."+b;var ad_id=strlistdate,reportUrl=gpmSendClickUrl+"?bid="+game+"&act_type=5&algo=4&uin="+iUin+"&recommend_id=0&t="+_r;if(strlistdate){pgv=pgv+"."+strlistdate;}d.onclick=function(){if(inarr(sb,b)){var act_id=f[10],e_code=f[11];var ShowAdClickUrl=reportUrl+"&loc="+b+"&id="+ad_id+"&act_id="+act_id+"&table_type=2&e_code="+e_code;}else{var ShowAdClick=a+"."+b+"."+strlistdate+"."+tas_code;var ShowAdClickUrl=LogCgi+"?m=SendLog&show_ads="+ShowAdClick+"&ad_url="+encodeURIComponent(this.href)+"&click_type=2&t="+(new Date()).getTime();}fn.loadjs(ShowAdClickUrl,function(){});};d.target="_blank";d.href=strHref;if(inarr(sb,b)){var imgPath=f[2];}else{var imgPath=adImgPre+f[2];}d.innerHTML="<img  src='"+imgPath+"' alt="+strTitle+" title="+strTitle+" data-detail='"+strSubTitle+"'  width="+f[3]+" height="+f[4]+" />";d.removeAttribute(strAttribute);if(inarr(sb,b)){var act_id=f[10],e_code=f[11];var jsUrl=reportUrl+"&loc="+b+"&id="+ad_id+"&act_id="+act_id+"&table_type=1&e_code="+e_code;fn.loadjs(jsUrl,function(){});}else{var ShowAdInfo=a+"."+b+"."+f[8]+"."+tas_code;ShowAdList.push(ShowAdInfo);}}}else{if(d.attributes[strAttributeTitle]){d.innerHTML=strTitle;if(d.nodeName=="A"){d.href=strHref;}d.removeAttribute(strAttributeTitle);}else{if(d.attributes[strAttributeSubTitle]){d.innerHTML=strSubTitle;d.removeAttribute(strAttributeSubTitle);}}}}}_c++;if(_c==arrLength){if(ShowAdList.length>0){var ShowAdStr=ShowAdList.join("|");var ShowUrl=LogCgi+"?m=SendLog&show_ads="+ShowAdStr+"&click_type=1&t="+(new Date()).getTime();fn.loadjs(ShowUrl,function(){});}if(window.gpmAdProcess!=undefined){window.gpmAdProcess();}}loadADs(_c);}function removeScript(a){var b=l.getElementsByTagName("script"),intScrLen=b.length,_obj=null;while(intScrLen--){_obj=b[intScrLen];if(_obj.src==a){var p=_obj.parentNode;if(p&&p.nodeType===1){p.removeChild(_obj);}}}}function compTime(beginTime,endTime,type){var nowTimes=new Date().getTime();beginTime=new Date(beginTime.replace(/-/g,"/")).getTime();endTime=new Date(endTime.replace(/-/g,"/")).getTime();var a=(nowTimes-beginTime)/3600/1000;if(a>=0){var b=(nowTimes-endTime)/3600/1000;if(b>0){if(type==1){return false;}else{var twoWeekTimes=(nowTimes-1000*60*60*24*14);var c=(endTime-twoWeekTimes)/3600/1000;if(c>0){return true;}else{return false;}}}else{return true;}}else{return false;}}function getParameter(str,paraname){var sValue=str.match(new RegExp("[?&]"+paraname+"=([^&]*)(&?)","i"));if(sValue?sValue[1]:sValue==null){return sValue?sValue[1]:sValue;}}function randNum(min,max){var range=max-min;var rand=Math.random();return(min+Math.round(rand*range));}function getActId(id){if(gpmObjJson.iAdId[id].actionID){return gpmObjJson.iAdId[id].actionID;}return 0;}function getEcodeId(id){if(gpmObjJson.iAdId[id].ecode){return gpmObjJson.iAdId[id].ecode;}return 0;}function getForceActId(obj){var a=obj.getAttribute&&obj.getAttribute(strAttribute),b=a.split(","),k=b[1];if(gpmObjJson.force[k]){var key=0;if(gpmObjJson.force[k].length>1){for(var kk in gpmObjJson.force[k]){if(gpmObjJson.force[k][kk].iAdId==obj.id){key=kk;}}}return gpmObjJson.force[k][key].actionID;}return 0;}function getForceEcodeId(obj){var a=obj.getAttribute&&obj.getAttribute(strAttribute),b=a.split(","),k=b[1];if(gpmObjJson.force[k]){var key=0;if(gpmObjJson.force[k].length>1){for(var kk in gpmObjJson.force[k]){if(gpmObjJson.force[k][kk].iAdId==obj.id){key=kk;}}}return gpmObjJson.force[k][key].ecode;}return 0;}function getPosId(obj){var a=obj.getAttribute&&obj.getAttribute(strAttribute);var b=a.split(",");return b[1];}function inUinList(u){if(grey){var l=["08","12"];if(l.length>0){var a=u.split("");var n=a[a.length-2]+""+a[a.length-1];for(var k in l){if(l[k]==n){return true;}}return false;}else{return true;}}return true;}function loadPreAd(){var pathname=location.pathname;if(pathname==""||pathname=="/"||pathname=="/index.html"||pathname=="/index.htm"||pathname=="/index.shtml"){fn.loadjs(protocol+"//ossweb-img.qq.com/images/clientpop/js/predialog.js");}}fn={getUrlVars:function(url){var vars=[],hash;var hashes=url.slice(url.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1];}return vars;},getUrlVar:function(url,name){return fn.getUrlVars(url)[name];},loadjs:function(url,callback,charset){var script=document.createElement("script");script.type="text/javascript";if(charset){script.setAttribute("charset",charset);}if(script.readyState){script.onreadystatechange=function(){if(script.readyState=="loaded"||script.readyState=="complete"){script.onreadystatechange=null;if(callback!=null||typeof(callback)!="undefined"){callback();}document.getElementsByTagName("head")[0].removeChild(this);}};}else{script.onload=function(){if(callback!=null||typeof(callback)!="undefined"){callback();}document.getElementsByTagName("head")[0].removeChild(this);};}script.src=url;document.getElementsByTagName("head")[0].appendChild(script);}};return{init:function(a){var b=((typeof(a)=="object")?a:l.getElementById(a))||l,arrAllEls=l.getElementsByTagName("*"),iArrAllEls=arrAllEls.length,oCurrEl,oAttribute,index=0;while(iArrAllEls--){oCurrEl=arrAllEls[iArrAllEls];oAttribute=oCurrEl.getAttribute&&oCurrEl.getAttribute(strAttribute)||oCurrEl.getAttribute(strAttributeTitle)||oCurrEl.getAttribute(strAttributeSubTitle);if(typeof oAttribute=="string"&&oAttribute.length>0&&oAttribute.split(",").length==2){gpmArrLinks[index]=arrLinks[index]={};gpmArrLinks[index].o=arrLinks[index].o=oCurrEl;gpmArrLinks[index].a=arrLinks[index].a=oAttribute;index++;}}gpmArrLength=arrLength=arrLinks.length;if(arrLength>0){iUin=getUin();game=getGame();if(inUinList(iUin)){loadGpmADs();}else{loadADs(0);}}}};})();TGAdsShow.init();}